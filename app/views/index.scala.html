@(modules: List[Module])

@import plugins._

@main("Home Dash"){
	@for(module <- modules){
		@if(module.getPlugin().hasCss()){
        	<link rel="stylesheet" media="screen" href="@routes.Assets.at("plugins/"+module.getPlugin().getId()+"/css/style.css")">
        }
	}
} {
	<div class="spinner-black">
		<div class="spinner">
			<div class="rect1"></div>
			<div class="rect2"></div>
			<div class="rect3"></div>
			<div class="rect4"></div>
			<div class="rect5"></div>
		</div>
	</div>
	<div class="row">
   	@if(modules.size() > 0){
		@for(module <- modules){
					
					<div id="module@module.id" data="@module.id" class="module toFadeIn col-md-@module.size">
						@if(module.getPlugin().hasBigScreen()){
							<a class="module-links internal-link" href="/big/@module.id"><span class="glyphicon glyphicon-resize-full"></span></a>
						}
						@if(module.getPlugin().getExternalLink() != null){
							<a class="module-links" target="_blank" href="@module.getPlugin().getExternalLink()"><span class="glyphicon glyphicon-new-window"></span></a>
						}
						
						@if(module.getPlugin().hasSettings()){
							<a class="settings internal-link module-links" href="@controllers.routes.Application.editModule(module.id)"><span class="glyphicon glyphicon-wrench"></span></a>
						}
						<a class="settings internal-link module-links" href="@controllers.routes.Application.deleteModule(module.id)"><span class="glyphicon glyphicon-remove"></span></a>
						
						<h3>
							@module.getPlugin().getName()
							<small>
							<span data="@module.id" class="settings glyphicon glyphicon-chevron-up"></span>
							<span data="@module.id" class="settings glyphicon glyphicon-chevron-down"></span>
							<span data="@module.id" class="settings glyphicon glyphicon-resize-small"></span>
							<span data="@module.id" class="settings glyphicon glyphicon-resize-full"></span>
							</small>
						</h3>
						<div style="position:relative;">
							@module.getPlugin().getSmallView(module)
						</div>
					</div>
			
		}
	}else{
		<p>No modules found</p>
	}
	</div>
	
	<div id="message-box" class="success"> Plop</div>
	<script type="text/javascript">
	 var WS_ADDRESS = "ws://" + window.location.host + "/ws";
	 var showLoadingOverlay = true;
	</script>
	
	@for(module <- modules){
		<script type="text/javascript" src="@routes.Assets.at("plugins/"+module.getPlugin().getId()+"/js/small.js")"></script>
	}
	<script type="text/javascript">
		var modules = [];
		$(document).ready(function(){
			@for(module <- modules){
				modules[@module.id] = new @{module.getPlugin().getId()}(@{module.id});
				
				modules[@module.id].documentReady();
			}
			console.log(modules);
		});
		
	</script>
	<script type="text/javascript" src="@routes.Assets.at("javascripts/index.js")"></script>
	<script type="text/javascript" src="@routes.Assets.at("javascripts/settings.js")"></script>
}


